(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{629:function(t,e,n){var content=n(737);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("1b91bcdc",content,!0,{sourceMap:!1})},630:function(t,e,n){var content=n(739);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("668347e0",content,!0,{sourceMap:!1})},631:function(t,e,n){var content=n(741);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("62edde6b",content,!0,{sourceMap:!1})},636:function(t,e,n){"use strict";n.r(e);n(7),n(10),n(97),n(11),n(49),n(19),n(20),n(14),n(12);var r=n(3),c=(n(59),n(8)),o=n(732),f=(n(733),n(735)),h=n.n(f);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={props:{idChat:String,compra:{type:Object,default:{users:{},product:{}}}},components:{Chat:o.Chat},data:function(){return{participants:[],messages:[],colors:{message:{myself:{bg:"#f5f6f9",text:"#545454"},others:{bg:"#fb4141",text:"#fff"},messagesDisplay:{bg:"#ffffff"}},submitIcon:"#b91010",submitImageIcon:"#b91010"},profilePictureConfig:{others:!1,myself:!1},myself:{},borderStyle:{topLeft:"0",topRight:"0",bottomLeft:"0",bottomRight:"0"}}},created:function(){this.pusherConnect(),this.getChats()},mounted:function(){this.setParticipants()},methods:{setParticipants:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.compra.users.map((function(t){return{name:t.first_name,id:t.id}}));case 2:return t.participants=e.sent,e.next=5,t.participants.find((function(e){return t.$auth.user.id==e.id}));case 5:t.myself=e.sent;case 6:case"end":return e.stop()}}),e)})))()},pusherConnect:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new h.a("bea379d627e6564fc761",{cluster:"us2"}),r=t,c=n.subscribe(t.idChat),o=n.subscribe("presence-"+t.idChat),console.log(o.members.count),c.bind("new-message",(function(data){data.user!=t.$auth.user.id&&r.messages.push({content:data.message,myself:!1,participantId:data.user,timestamp:new Date})}));case 6:case"end":return e.stop()}}),e)})))()},getChats:function(){var t=this;this.$axios.get("/chats/?compra=".concat(this.idChat)).then(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,data.data.map((function(e){var data={};return data.myself=e.user.id==t.$auth.user.id,data.content=e.message,data.participantId=e.user.id,data.timestamp=e.created_at,data}));case 2:t.messages=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},sendMessage:function(t){var e=this,data=d(d({},t),{},{channelID:this.idChat});this.$axios.post("/chats/",data).then((function(data){e.messages.push({content:data.data.message,myself:!0,participantId:e.$auth.user.id,timestamp:new Date})}))}}},y=(n(736),n(738),n(18)),component=Object(y.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.participants.length>0?n("Chat",{attrs:{participants:t.participants,myself:t.myself,messages:t.messages,placeholder:"Tu mensaje...",profilePictureConfig:t.profilePictureConfig,colors:t.colors,"border-style":t.borderStyle,"hide-close-button":"","display-header":!1,"send-images":!1},on:{onMessageSubmit:t.sendMessage}}):t._e()}),[],!1,null,"67de0bc0",null);e.default=component.exports},736:function(t,e,n){"use strict";n(629)},737:function(t,e,n){(e=n(15)(!1)).push([t.i,".height-chat[data-v-67de0bc0]{height:calc(100vh - 150px);overflow-y:auto}",""]),t.exports=e},738:function(t,e,n){"use strict";n(630)},739:function(t,e,n){(e=n(15)(!1)).push([t.i,".quick-chat-container{background:#fff}.quick-chat-container .container-message-manager{height:45px;background:#f7f7f7;margin:10px;border-radius:30px;box-shadow:none}.quick-chat-container .container-message-manager .icon-send-message,.quick-chat-container .message-input{margin-top:5px}",""]),t.exports=e},740:function(t,e,n){"use strict";n(631)},741:function(t,e,n){(e=n(15)(!1)).push([t.i,".height-chat[data-v-fd3331c2]{height:calc(100vh - 56px)}",""]),t.exports=e},805:function(t,e,n){"use strict";n.r(e);n(31);var r={layout:"withBackButton",components:{chatComponent:n(636).default},data:function(){return{compra:{product:{}},idChat:this.$route.params.id_chat}},created:function(){this.$store.dispatch("general/setShowBottomBar",!1),this.getCompra()},methods:{getCompra:function(){var t=this;this.$axios.get("/compras/".concat(this.idChat)).then((function(data){t.$store.dispatch("general/setTitlePage",data.data.announcement.name),t.compra=data.data}))}}},c=(n(740),n(18)),o=n(17),f=n.n(o),h=n(389),component=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{staticClass:"pa-0 height-chat"},[this.compra.users?e("chat-component",{attrs:{compra:this.compra,idChat:this.idChat}}):this._e()],1)}),[],!1,null,"fd3331c2",null);e.default=component.exports;f()(component,{ChatComponent:n(636).default}),f()(component,{VContainer:h.a})}}]);